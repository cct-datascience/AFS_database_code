---
title: "Standardized Fish Data Comparison"
format: html
editor: visual
---

## Datasets

Current dataset is called `Test_results_full_012723.csv` and new dataset is called `AFS_data_all_060524_FINAL.csv`. Erin Tracy sent the new dataset on June 5, 2024. 

## Catalogue of dataset differences

- General
    - **CORRECT** New dataset has about 40% of the occurrences of the current -- this is due to them retaining only occurrences with an N >= 5, which is in accordance with book data
- Columns
    - **FIXED** They are in a different order
    - **FIXED** Three columns have different names: gcat -> Gabelhouse, mean -> Mean, se -> SE
- Observations
    - Method names and waterbody types separated by space instead of underscore
    - **FIXED** Gabelhouse categories are acronyms instead of full names
    - Mean and SE are rounded to one decimal instead of having many values beyond decimal

## Exploratory code

```{r}
library(dplyr)
library(readr)
```

### Read in two datasets

```{r}
current <- read_csv("app/Test_results_full_012723.csv")
new <- read_csv("app/standardized_fish_data.csv")
```

### Compare datasets

```{r}
all_equal(new, current)
```

```{r}
waldo::compare(new, current)
```

### Observations comparison

```{r}
wi_bg_new <- filter(new, area == "Wisconsin", common_name == "Bluegill")
wi_bg_old_all <- filter(current, area == "Wisconsin", common_name == "Bluegill")
wi_bg_old <- filter(current, area == "Wisconsin", common_name == "Bluegill", waterbody_type == "wadeable_streams", metric == "Length Frequency")

sort(table(current$common_name))
sort(table(new$common_name))

length(unique(current$common_name))
length(unique(new$common_name))

unique(current$method)
unique(new$method)
```
